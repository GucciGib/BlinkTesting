<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>Responsive Circle Animation</title>
  <link href="style.css" rel="stylesheet">
</head>

<body>
  <canvas id="canvas"></canvas>
  <div class="container">
    <button id="toggle-button">Controls</button>
    <div id="control-panel">

      <div id="theme-select" style="position: relative; display: flex; align-items: center;">
        <label for="checkbox" style="margin-right:5px;">Theme Select:</label>
        <input type="checkbox" class="checkbox" id="checkbox">
        <label for="checkbox" class="checkbox-label">
          <span class="ball"></span>
        </label>
      </div>

      <div id="advanced-settings-toggle">
        Advanced Theme: <span>&#9660;</span>
      </div>
      <div id="advanced-settings">
        <div class="control-item">
          <label for="background-color-select" style="margin-bottom:1px;">Background Color:</label>
          <select id="background-color-select">
            <option value="black">Black</option>
            <option value="white">White</option>
            <option value="red">Red</option>
            <option value="#0083ed">Blue</option>
            <option value="green">Green</option>
          </select>
        </div>
        <div class="control-item">
          <label for="circle-color-select">Circle Color:</label>
          <select id="circle-color-select">
            <option value="black">Black</option>
            <option value="white" selected>White</option>
            <option value="red">Red</option>
            <option value="#0083ed">Blue</option>
            <option value="green">Green</option>
          </select>
        </div>
        <div class="control-item">
          <label for="dot-color-select">Dot Color:</label>
          <select id="dot-color-select">
            <option value="black">Black</option>
            <option value="white" selected>White</option>
            <option value="red">Red</option>
            <option value="#0083ed">Blue</option>
            <option value="green">Green</option>
          </select>
        </div>
      </div>

      <div class="control-item">
        <label for="dot-radius">Dot Radius:</label>
        <input type="range" id="dot-radius" min="1" max="20" value="10">
      </div>

      <div class="control-item">
        <label for="dot-speed">Dot Speed:</label>
        <input type="range" id="dot-speed" min="10" max="300" value="100">
      </div>

    </div>
  </div>

  <script>
    document.addEventListener('DOMContentLoaded', function () {
      const canvas = document.getElementById('canvas');
      const ctx = canvas.getContext('2d');

      let background_color = 'black';
      let dot_color = 'white';
      let circle_color = 'white';
      let theme = 'dark';
      let dot_radius = 10;
      let dot_speed = 100;

      const circle_radius = 0.35;
      let radius = circle_radius * Math.min(canvas.width, canvas.height);
      let angle = 0;
      let lastFrameTime = 0;

      function updateVariables() {
        dot_radius = parseInt(document.getElementById('dot-radius').value, 10);
        dot_speed = parseInt(document.getElementById('dot-speed').value, 15);
        background_color = document.getElementById('background-color-select').value;
        circle_color = document.getElementById('circle-color-select').value;
        dot_color = document.getElementById('dot-color-select').value;
      }

      // Function to handle theme changes
      function changeTheme() {
        theme = theme === 'dark' ? 'light' : 'dark';

        const backgroundSelect = document.getElementById('background-color-select');
        const circleSelect = document.getElementById('circle-color-select');
        const dotSelect = document.getElementById('dot-color-select');

        if (theme === 'light') {
          background_color = 'white';
          dot_color = 'black';
          circle_color = 'black';

          backgroundSelect.value = 'white';
          circleSelect.value = 'black';
          dotSelect.value = 'black';
        } else {
          background_color = 'black';
          dot_color = 'white';
          circle_color = 'white';

          backgroundSelect.value = 'black';
          circleSelect.value = 'white';
          dotSelect.value = 'white';
        }

        const label = document.querySelector('.checkbox-label');
        const ball = document.querySelector('.checkbox-label .ball');
        const control_panel = document.querySelector('#control-panel');

        label.style.backgroundColor = theme === 'light' ? '#DDD' : '#111';
        ball.style.backgroundColor = theme === 'light' ? '#333' : '#FFF';
        control_panel.style.backgroundColor = theme === 'light' ? '#F0F0F0' : '#F5F5F5';

        requestAnimationFrame(draw);
      }

      // Toggle control panel
      const toggleButton = document.getElementById('toggle-button');
      const controlPanel = document.getElementById('control-panel');
      toggleButton.addEventListener('click', function () {
        const isDisplayed = controlPanel.style.display === 'flex';
        controlPanel.style.display = isDisplayed ? 'none' : 'flex';
      });

      // Toggle advanced theme dropdown
      document.getElementById('advanced-settings-toggle').addEventListener('click', function () {
        var settings = document.getElementById('advanced-settings');
        if (settings.style.maxHeight !== '0px' && settings.style.maxHeight !== '') {
          settings.style.maxHeight = '0px';
        } else {
          settings.style.maxHeight = '175px';
        }
      });

      function resizeCanvas() {
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
        radius = circle_radius * Math.min(canvas.width, canvas.height);
      }

      window.addEventListener('resize', resizeCanvas);
      resizeCanvas(); // Initial resize to set canvas dimensions

      function draw(timestamp) {
        if (!lastFrameTime) lastFrameTime = timestamp;
        const deltaTime = (timestamp - lastFrameTime) / 1000; // deltaTime in seconds
        lastFrameTime = timestamp;

        ctx.clearRect(0, 0, canvas.width, canvas.height);
        ctx.fillStyle = background_color;
        ctx.fillRect(0, 0, canvas.width, canvas.height);

        const centerX = canvas.width / 2;
        const centerY = canvas.height / 2;

        // Draw the circle
        ctx.beginPath();
        ctx.strokeStyle = circle_color;
        ctx.arc(centerX, centerY, radius, 0, Math.PI * 2, true);
        ctx.stroke();

        // Update the angle for the next frame
        angle += (dot_speed / radius) * deltaTime;

        // Calculate the new position of the dot
        let x = centerX + radius * Math.cos(angle);
        let y = centerY + radius * Math.sin(angle);

        // Draw the dot
        ctx.beginPath();
        ctx.arc(x, y, dot_radius, 0, Math.PI * 2, true);
        ctx.fillStyle = dot_color;
        ctx.fill();

        requestAnimationFrame(draw);
      }

      // Event listeners for controls
      document.getElementById('checkbox').addEventListener('change', changeTheme);
      document.getElementById('dot-radius').addEventListener('input', updateVariables);
      document.getElementById('dot-speed').addEventListener('input', updateVariables);
      document.getElementById('background-color-select').addEventListener('change', updateVariables);
      document.getElementById('circle-color-select').addEventListener('change', updateVariables);
      document.getElementById('dot-color-select').addEventListener('change', updateVariables);

      requestAnimationFrame(draw); // Start the animation loop
    });
  </script>
</body>

</html>